'''
Dependencies workspace file - Includes project definitions for all of the project's external dependencies.
'''
workspace(name = 'deps')

load('@bazel_tools//tools/build_defs/repo:http.bzl', 'http_archive')

# Enable foreign toolchains using rules_foreign_cc
http_archive(
    name = 'rules_foreign_cc',
    sha256 = '69023642d5781c68911beda769f91fcbc8ca48711db935a75da7f6536b65047f',
    strip_prefix = 'rules_foreign_cc-0.6.0',
    url = 'https://github.com/bazelbuild/rules_foreign_cc/archive/0.6.0.tar.gz',
)

load('@rules_foreign_cc//foreign_cc:repositories.bzl', 'rules_foreign_cc_dependencies')
rules_foreign_cc_dependencies()

_ALL_CONTENT = '''\
filegroup(
    name = 'all_srcs',
    srcs = glob(['**']),
    visibility = ['//visibility:public'],
)
'''

# Download llhttp
http_archive(
  name = 'llhtp',
  build_file_content = _ALL_CONTENT,
  url = ['https://github.com/nodejs/llhttp/archive/refs/tags/v2.1.4.zip'],
  strip_prefix = 'llhttp-2.1.4',
  sha256 = '6eb36c543b9a9d604018a1be6bb9e60f985f6f3eb619ae970285fca6a77d6931'
)

# Download libuv
http_archive(
  name = 'libuv',
  build_file_content = _ALL_CONTENT,
  url = ['https://github.com/libuv/libuv/archive/refs/tags/v1.42.0.zip'],
  strip_prefix = 'libuv-1.42.0',
  sha256 = '031130768b25ae18c4b9d4a94ba7734e2072b11c6fce3e554612c516c3241402'
)
